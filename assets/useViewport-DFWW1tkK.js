import{R as x,r as Ve,j as M,E as Pt,ah as $t,u as Wt,a as qt,aj as Ht,ak as Kt,al as zt}from"./index-3yd_dm4Y.js";import{L as de,C as Ie}from"./label-sJOf3gfQ.js";var be=e=>e.type==="checkbox",ue=e=>e instanceof Date,z=e=>e==null;const xt=e=>typeof e=="object";var W=e=>!z(e)&&!Array.isArray(e)&&xt(e)&&!ue(e),vt=e=>W(e)&&e.target?be(e.target)?e.target.checked:e.target.value:e,Yt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ft=(e,r)=>e.has(Yt(r)),Gt=e=>{const r=e.constructor&&e.constructor.prototype;return W(r)&&r.hasOwnProperty("isPrototypeOf")},Ge=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function j(e){let r;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(!(Ge&&(e instanceof Blob||i))&&(t||W(e)))if(r=t?[]:{},!t&&!Gt(e))r=e;else for(const l in e)e.hasOwnProperty(l)&&(r[l]=j(e[l]));else return e;return r}var ke=e=>/^\w*$/.test(e),B=e=>e===void 0,Ee=e=>Array.isArray(e)?e.filter(Boolean):[],Je=e=>Ee(e.replace(/["|']|\]/g,"").split(/\.|\[/)),f=(e,r,t)=>{if(!r||!W(e))return t;const i=(ke(r)?[r]:Je(r)).reduce((l,a)=>z(l)?l:l[a],e);return B(i)||i===e?B(e[r])?t:e[r]:i},Z=e=>typeof e=="boolean",I=(e,r,t)=>{let i=-1;const l=ke(r)?[r]:Je(r),a=l.length,c=a-1;for(;++i<a;){const u=l[i];let v=t;if(i!==c){const S=e[u];v=W(S)||Array.isArray(S)?S:isNaN(+l[i+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=v,e=e[u]}};const Ae={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},te={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ae={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Qe=x.createContext(null);Qe.displayName="HookFormContext";const De=()=>x.useContext(Qe),xr=e=>{const{children:r,...t}=e;return x.createElement(Qe.Provider,{value:t},r)};var Vt=(e,r,t,i=!0)=>{const l={defaultValues:r._defaultValues};for(const a in e)Object.defineProperty(l,a,{get:()=>{const c=a;return r._proxyFormState[c]!==te.all&&(r._proxyFormState[c]=!i||te.all),t&&(t[c]=!0),e[c]}});return l};const Ce=typeof window<"u"?Ve.useLayoutEffect:Ve.useEffect;function Jt(e){const r=De(),{control:t=r.control,disabled:i,name:l,exact:a}=e||{},[c,u]=x.useState(t._formState),v=x.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ce(()=>t._subscribe({name:l,formState:v.current,exact:a,callback:S=>{!i&&u({...t._formState,...S})}}),[l,i,a]),x.useEffect(()=>{v.current.isValid&&t._setValid(!0)},[t]),x.useMemo(()=>Vt(c,t,v.current,!1),[c,t])}var ie=e=>typeof e=="string",At=(e,r,t,i,l)=>ie(e)?(i&&r.watch.add(e),f(t,e,l)):Array.isArray(e)?e.map(a=>(i&&r.watch.add(a),f(t,a))):(i&&(r.watchAll=!0),t);function Qt(e){const r=De(),{control:t=r.control,name:i,defaultValue:l,disabled:a,exact:c}=e||{},u=x.useRef(l),[v,S]=x.useState(t._getWatch(i,u.current));return Ce(()=>t._subscribe({name:i,formState:{values:!0},exact:c,callback:E=>!a&&S(At(i,t._names,E.values||t._formValues,!1,u.current))}),[i,t,a,c]),x.useEffect(()=>t._removeUnmounted()),v}function Xt(e){const r=De(),{name:t,disabled:i,control:l=r.control,shouldUnregister:a}=e,c=Ft(l._names.array,t),u=Qt({control:l,name:t,defaultValue:f(l._formValues,t,f(l._defaultValues,t,e.defaultValue)),exact:!0}),v=Jt({control:l,name:t,exact:!0}),S=x.useRef(e),E=x.useRef(l.register(t,{...e.rules,value:u,...Z(e.disabled)?{disabled:e.disabled}:{}})),F=x.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!f(v.errors,t)},isDirty:{enumerable:!0,get:()=>!!f(v.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!f(v.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!f(v.validatingFields,t)},error:{enumerable:!0,get:()=>f(v.errors,t)}}),[v,t]),g=x.useCallback(w=>E.current.onChange({target:{value:vt(w),name:t},type:Ae.CHANGE}),[t]),A=x.useCallback(()=>E.current.onBlur({target:{value:f(l._formValues,t),name:t},type:Ae.BLUR}),[t,l._formValues]),O=x.useCallback(w=>{const Y=f(l._fields,t);Y&&w&&(Y._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:V=>w.setCustomValidity(V),reportValidity:()=>w.reportValidity()})},[l._fields,t]),p=x.useMemo(()=>({name:t,value:u,...Z(i)||v.disabled?{disabled:v.disabled||i}:{},onChange:g,onBlur:A,ref:O}),[t,i,v.disabled,g,A,O,u]);return x.useEffect(()=>{const w=l._options.shouldUnregister||a;l.register(t,{...S.current.rules,...Z(S.current.disabled)?{disabled:S.current.disabled}:{}});const Y=(V,q)=>{const D=f(l._fields,V);D&&D._f&&(D._f.mount=q)};if(Y(t,!0),w){const V=j(f(l._options.defaultValues,t));I(l._defaultValues,t,V),B(f(l._formValues,t))&&I(l._formValues,t,V)}return!c&&l.register(t),()=>{(c?w&&!l._state.action:w)?l.unregister(t):Y(t,!1)}},[t,l,c,a]),x.useEffect(()=>{l._setDisabledField({disabled:i,name:t})},[i,t,l]),x.useMemo(()=>({field:p,formState:v,fieldState:F}),[p,v,F])}const vr=e=>e.render(Xt(e));var Zt=(e,r,t,i,l)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:l||!0}}:{},J=e=>Array.isArray(e)?e:[e],ct=()=>{let e=[];return{get observers(){return e},next:l=>{for(const a of e)a.next&&a.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(a=>a!==l)}}),unsubscribe:()=>{e=[]}}},Ke=e=>z(e)||!xt(e);function oe(e,r,t=new WeakSet){if(Ke(e)||Ke(r))return e===r;if(ue(e)&&ue(r))return e.getTime()===r.getTime();const i=Object.keys(e),l=Object.keys(r);if(i.length!==l.length)return!1;if(t.has(e)||t.has(r))return!0;t.add(e),t.add(r);for(const a of i){const c=e[a];if(!l.includes(a))return!1;if(a!=="ref"){const u=r[a];if(ue(c)&&ue(u)||W(c)&&W(u)||Array.isArray(c)&&Array.isArray(u)?!oe(c,u,t):c!==u)return!1}}return!0}var K=e=>W(e)&&!Object.keys(e).length,Xe=e=>e.type==="file",re=e=>typeof e=="function",pe=e=>{if(!Ge)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},pt=e=>e.type==="select-multiple",Ze=e=>e.type==="radio",er=e=>Ze(e)||be(e),Ue=e=>pe(e)&&e.isConnected;function tr(e,r){const t=r.slice(0,-1).length;let i=0;for(;i<t;)e=B(e)?i++:e[r[i++]];return e}function rr(e){for(const r in e)if(e.hasOwnProperty(r)&&!B(e[r]))return!1;return!0}function $(e,r){const t=Array.isArray(r)?r:ke(r)?[r]:Je(r),i=t.length===1?e:tr(e,t),l=t.length-1,a=t[l];return i&&delete i[a],l!==0&&(W(i)&&K(i)||Array.isArray(i)&&rr(i))&&$(e,t.slice(0,-1)),e}var wt=e=>{for(const r in e)if(re(e[r]))return!0;return!1};function we(e,r={}){const t=Array.isArray(e);if(W(e)||t)for(const i in e)Array.isArray(e[i])||W(e[i])&&!wt(e[i])?(r[i]=Array.isArray(e[i])?[]:{},we(e[i],r[i])):z(e[i])||(r[i]=!0);return r}function St(e,r,t){const i=Array.isArray(e);if(W(e)||i)for(const l in e)Array.isArray(e[l])||W(e[l])&&!wt(e[l])?B(r)||Ke(t[l])?t[l]=Array.isArray(e[l])?we(e[l],[]):{...we(e[l])}:St(e[l],z(r)?{}:r[l],t[l]):t[l]=!oe(e[l],r[l]);return t}var me=(e,r)=>St(e,r,we(r));const dt={value:!1,isValid:!1},ft={value:!0,isValid:!0};var kt=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!B(e[0].attributes.value)?B(e[0].value)||e[0].value===""?ft:{value:e[0].value,isValid:!0}:ft:dt}return dt},Et=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:i})=>B(e)?e:r?e===""?NaN:e&&+e:t&&ie(e)?new Date(e):i?i(e):e;const yt={isValid:!1,value:null};var Dt=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,yt):yt;function gt(e){const r=e.ref;return Xe(r)?r.files:Ze(r)?Dt(e.refs).value:pt(r)?[...r.selectedOptions].map(({value:t})=>t):be(r)?kt(e.refs).value:Et(B(r.value)?e.ref.value:r.value,e)}var sr=(e,r,t,i)=>{const l={};for(const a of e){const c=f(r,a);c&&I(l,a,c._f)}return{criteriaMode:t,names:[...e],fields:l,shouldUseNativeValidation:i}},Se=e=>e instanceof RegExp,_e=e=>B(e)?e:Se(e)?e.source:W(e)?Se(e.value)?e.value.source:e.value:e,ye=e=>({isOnSubmit:!e||e===te.onSubmit,isOnBlur:e===te.onBlur,isOnChange:e===te.onChange,isOnAll:e===te.all,isOnTouch:e===te.onTouched});const ht="AsyncFunction";var ir=e=>!!e&&!!e.validate&&!!(re(e.validate)&&e.validate.constructor.name===ht||W(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===ht)),ar=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ze=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ge=(e,r,t,i)=>{for(const l of t||Object.keys(e)){const a=f(e,l);if(a){const{_f:c,...u}=a;if(c){if(c.refs&&c.refs[0]&&r(c.refs[0],l)&&!i)return!0;if(c.ref&&r(c.ref,c.name)&&!i)return!0;if(ge(u,r))break}else if(W(u)&&ge(u,r))break}}};function mt(e,r,t){const i=f(e,t);if(i||ke(t))return{error:i,name:t};const l=t.split(".");for(;l.length;){const a=l.join("."),c=f(r,a),u=f(e,a);if(c&&!Array.isArray(c)&&t!==a)return{name:t};if(u&&u.type)return{name:a,error:u};if(u&&u.root&&u.root.type)return{name:`${a}.root`,error:u.root};l.pop()}return{name:t}}var nr=(e,r,t,i)=>{t(e);const{name:l,...a}=e;return K(a)||Object.keys(a).length>=Object.keys(r).length||Object.keys(a).find(c=>r[c]===(!i||te.all))},lr=(e,r,t)=>!e||!r||e===r||J(e).some(i=>i&&(t?i===r:i.startsWith(r)||r.startsWith(i))),or=(e,r,t,i,l)=>l.isOnAll?!1:!t&&l.isOnTouch?!(r||e):(t?i.isOnBlur:l.isOnBlur)?!e:(t?i.isOnChange:l.isOnChange)?e:!0,ur=(e,r)=>!Ee(f(e,r)).length&&$(e,r),Ct=(e,r,t)=>{const i=J(f(e,t));return I(i,"root",r[t]),I(e,t,i),e},Fe=e=>ie(e);function _t(e,r,t="validate"){if(Fe(e)||Array.isArray(e)&&e.every(Fe)||Z(e)&&!e)return{type:t,message:Fe(e)?e:"",ref:r}}var fe=e=>W(e)&&!Se(e)?e:{value:e,message:""},Ye=async(e,r,t,i,l,a)=>{const{ref:c,refs:u,required:v,maxLength:S,minLength:E,min:F,max:g,pattern:A,validate:O,name:p,valueAsNumber:w,mount:Y}=e._f,V=f(t,p);if(!Y||r.has(p))return{};const q=u?u[0]:c,D=L=>{l&&q.reportValidity&&(q.setCustomValidity(Z(L)?"":L||""),q.reportValidity())},C={},_=Ze(c),m=be(c),k=_||m,N=(w||Xe(c))&&B(c.value)&&B(V)||pe(c)&&c.value===""||V===""||Array.isArray(V)&&!V.length,Q=Zt.bind(null,p,i,C),X=(L,T,P,H=ae.maxLength,G=ae.minLength)=>{const se=L?T:P;C[p]={type:L?H:G,message:se,ref:c,...Q(L?H:G,se)}};if(a?!Array.isArray(V)||!V.length:v&&(!k&&(N||z(V))||Z(V)&&!V||m&&!kt(u).isValid||_&&!Dt(u).isValid)){const{value:L,message:T}=Fe(v)?{value:!!v,message:v}:fe(v);if(L&&(C[p]={type:ae.required,message:T,ref:q,...Q(ae.required,T)},!i))return D(T),C}if(!N&&(!z(F)||!z(g))){let L,T;const P=fe(g),H=fe(F);if(!z(V)&&!isNaN(V)){const G=c.valueAsNumber||V&&+V;z(P.value)||(L=G>P.value),z(H.value)||(T=G<H.value)}else{const G=c.valueAsDate||new Date(V),se=xe=>new Date(new Date().toDateString()+" "+xe),he=c.type=="time",ce=c.type=="week";ie(P.value)&&V&&(L=he?se(V)>se(P.value):ce?V>P.value:G>new Date(P.value)),ie(H.value)&&V&&(T=he?se(V)<se(H.value):ce?V<H.value:G<new Date(H.value))}if((L||T)&&(X(!!L,P.message,H.message,ae.max,ae.min),!i))return D(C[p].message),C}if((S||E)&&!N&&(ie(V)||a&&Array.isArray(V))){const L=fe(S),T=fe(E),P=!z(L.value)&&V.length>+L.value,H=!z(T.value)&&V.length<+T.value;if((P||H)&&(X(P,L.message,T.message),!i))return D(C[p].message),C}if(A&&!N&&ie(V)){const{value:L,message:T}=fe(A);if(Se(L)&&!V.match(L)&&(C[p]={type:ae.pattern,message:T,ref:c,...Q(ae.pattern,T)},!i))return D(T),C}if(O){if(re(O)){const L=await O(V,t),T=_t(L,q);if(T&&(C[p]={...T,...Q(ae.validate,T.message)},!i))return D(T.message),C}else if(W(O)){let L={};for(const T in O){if(!K(L)&&!i)break;const P=_t(await O[T](V,t),q,T);P&&(L={...P,...Q(T,P.message)},D(P.message),i&&(C[p]=L))}if(!K(L)&&(C[p]={ref:q,...L},!i))return C}}return D(!0),C};const cr={mode:te.onSubmit,reValidateMode:te.onChange,shouldFocusError:!0};function dr(e={}){let r={...cr,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:re(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},l=W(r.defaultValues)||W(r.values)?j(r.defaultValues||r.values)||{}:{},a=r.shouldUnregister?{}:j(l),c={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},v,S=0;const E={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let F={...E};const g={array:ct(),state:ct()},A=r.criteriaMode===te.all,O=s=>n=>{clearTimeout(S),S=setTimeout(s,n)},p=async s=>{if(!r.disabled&&(E.isValid||F.isValid||s)){const n=r.resolver?K((await m()).errors):await N(i,!0);n!==t.isValid&&g.state.next({isValid:n})}},w=(s,n)=>{!r.disabled&&(E.isValidating||E.validatingFields||F.isValidating||F.validatingFields)&&((s||Array.from(u.mount)).forEach(o=>{o&&(n?I(t.validatingFields,o,n):$(t.validatingFields,o))}),g.state.next({validatingFields:t.validatingFields,isValidating:!K(t.validatingFields)}))},Y=(s,n=[],o,h,y=!0,d=!0)=>{if(h&&o&&!r.disabled){if(c.action=!0,d&&Array.isArray(f(i,s))){const b=o(f(i,s),h.argA,h.argB);y&&I(i,s,b)}if(d&&Array.isArray(f(t.errors,s))){const b=o(f(t.errors,s),h.argA,h.argB);y&&I(t.errors,s,b),ur(t.errors,s)}if((E.touchedFields||F.touchedFields)&&d&&Array.isArray(f(t.touchedFields,s))){const b=o(f(t.touchedFields,s),h.argA,h.argB);y&&I(t.touchedFields,s,b)}(E.dirtyFields||F.dirtyFields)&&(t.dirtyFields=me(l,a)),g.state.next({name:s,isDirty:X(s,n),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else I(a,s,n)},V=(s,n)=>{I(t.errors,s,n),g.state.next({errors:t.errors})},q=s=>{t.errors=s,g.state.next({errors:t.errors,isValid:!1})},D=(s,n,o,h)=>{const y=f(i,s);if(y){const d=f(a,s,B(o)?f(l,s):o);B(d)||h&&h.defaultChecked||n?I(a,s,n?d:gt(y._f)):P(s,d),c.mount&&p()}},C=(s,n,o,h,y)=>{let d=!1,b=!1;const R={name:s};if(!r.disabled){if(!o||h){(E.isDirty||F.isDirty)&&(b=t.isDirty,t.isDirty=R.isDirty=X(),d=b!==R.isDirty);const U=oe(f(l,s),n);b=!!f(t.dirtyFields,s),U?$(t.dirtyFields,s):I(t.dirtyFields,s,!0),R.dirtyFields=t.dirtyFields,d=d||(E.dirtyFields||F.dirtyFields)&&b!==!U}if(o){const U=f(t.touchedFields,s);U||(I(t.touchedFields,s,o),R.touchedFields=t.touchedFields,d=d||(E.touchedFields||F.touchedFields)&&U!==o)}d&&y&&g.state.next(R)}return d?R:{}},_=(s,n,o,h)=>{const y=f(t.errors,s),d=(E.isValid||F.isValid)&&Z(n)&&t.isValid!==n;if(r.delayError&&o?(v=O(()=>V(s,o)),v(r.delayError)):(clearTimeout(S),v=null,o?I(t.errors,s,o):$(t.errors,s)),(o?!oe(y,o):y)||!K(h)||d){const b={...h,...d&&Z(n)?{isValid:n}:{},errors:t.errors,name:s};t={...t,...b},g.state.next(b)}},m=async s=>{w(s,!0);const n=await r.resolver(a,r.context,sr(s||u.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return w(s),n},k=async s=>{const{errors:n}=await m(s);if(s)for(const o of s){const h=f(n,o);h?I(t.errors,o,h):$(t.errors,o)}else t.errors=n;return n},N=async(s,n,o={valid:!0})=>{for(const h in s){const y=s[h];if(y){const{_f:d,...b}=y;if(d){const R=u.array.has(d.name),U=y._f&&ir(y._f);U&&E.validatingFields&&w([h],!0);const ee=await Ye(y,u.disabled,a,A,r.shouldUseNativeValidation&&!n,R);if(U&&E.validatingFields&&w([h]),ee[d.name]&&(o.valid=!1,n))break;!n&&(f(ee,d.name)?R?Ct(t.errors,ee,d.name):I(t.errors,d.name,ee[d.name]):$(t.errors,d.name))}!K(b)&&await N(b,n,o)}}return o.valid},Q=()=>{for(const s of u.unMount){const n=f(i,s);n&&(n._f.refs?n._f.refs.every(o=>!Ue(o)):!Ue(n._f.ref))&&Ne(s)}u.unMount=new Set},X=(s,n)=>!r.disabled&&(s&&n&&I(a,s,n),!oe(xe(),l)),L=(s,n,o)=>At(s,u,{...c.mount?a:B(n)?l:ie(s)?{[s]:n}:n},o,n),T=s=>Ee(f(c.mount?a:l,s,r.shouldUnregister?f(l,s,[]):[])),P=(s,n,o={})=>{const h=f(i,s);let y=n;if(h){const d=h._f;d&&(!d.disabled&&I(a,s,Et(n,d)),y=pe(d.ref)&&z(n)?"":n,pt(d.ref)?[...d.ref.options].forEach(b=>b.selected=y.includes(b.value)):d.refs?be(d.ref)?d.refs.forEach(b=>{(!b.defaultChecked||!b.disabled)&&(Array.isArray(y)?b.checked=!!y.find(R=>R===b.value):b.checked=y===b.value||!!y)}):d.refs.forEach(b=>b.checked=b.value===y):Xe(d.ref)?d.ref.value="":(d.ref.value=y,d.ref.type||g.state.next({name:s,values:j(a)})))}(o.shouldDirty||o.shouldTouch)&&C(s,y,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&ce(s)},H=(s,n,o)=>{for(const h in n){if(!n.hasOwnProperty(h))return;const y=n[h],d=s+"."+h,b=f(i,d);(u.array.has(s)||W(y)||b&&!b._f)&&!ue(y)?H(d,y,o):P(d,y,o)}},G=(s,n,o={})=>{const h=f(i,s),y=u.array.has(s),d=j(n);I(a,s,d),y?(g.array.next({name:s,values:j(a)}),(E.isDirty||E.dirtyFields||F.isDirty||F.dirtyFields)&&o.shouldDirty&&g.state.next({name:s,dirtyFields:me(l,a),isDirty:X(s,d)})):h&&!h._f&&!z(d)?H(s,d,o):P(s,d,o),ze(s,u)&&g.state.next({...t}),g.state.next({name:c.mount?s:void 0,values:j(a)})},se=async s=>{c.mount=!0;const n=s.target;let o=n.name,h=!0;const y=f(i,o),d=U=>{h=Number.isNaN(U)||ue(U)&&isNaN(U.getTime())||oe(U,f(a,o,U))},b=ye(r.mode),R=ye(r.reValidateMode);if(y){let U,ee;const ve=n.type?gt(y._f):vt(s),ne=s.type===Ae.BLUR||s.type===Ae.FOCUS_OUT,Mt=!ar(y._f)&&!r.resolver&&!f(t.errors,o)&&!y._f.deps||or(ne,f(t.touchedFields,o),t.isSubmitted,R,b),Re=ze(o,u,ne);I(a,o,ve),ne?(y._f.onBlur&&y._f.onBlur(s),v&&v(0)):y._f.onChange&&y._f.onChange(s);const Te=C(o,ve,ne),jt=!K(Te)||Re;if(!ne&&g.state.next({name:o,type:s.type,values:j(a)}),Mt)return(E.isValid||F.isValid)&&(r.mode==="onBlur"?ne&&p():ne||p()),jt&&g.state.next({name:o,...Re?{}:Te});if(!ne&&Re&&g.state.next({...t}),r.resolver){const{errors:ot}=await m([o]);if(d(ve),h){const Bt=mt(t.errors,i,o),ut=mt(ot,i,Bt.name||o);U=ut.error,o=ut.name,ee=K(ot)}}else w([o],!0),U=(await Ye(y,u.disabled,a,A,r.shouldUseNativeValidation))[o],w([o]),d(ve),h&&(U?ee=!1:(E.isValid||F.isValid)&&(ee=await N(i,!0)));h&&(y._f.deps&&ce(y._f.deps),_(o,ee,U,Te))}},he=(s,n)=>{if(f(t.errors,n)&&s.focus)return s.focus(),1},ce=async(s,n={})=>{let o,h;const y=J(s);if(r.resolver){const d=await k(B(s)?s:y);o=K(d),h=s?!y.some(b=>f(d,b)):o}else s?(h=(await Promise.all(y.map(async d=>{const b=f(i,d);return await N(b&&b._f?{[d]:b}:b)}))).every(Boolean),!(!h&&!t.isValid)&&p()):h=o=await N(i);return g.state.next({...!ie(s)||(E.isValid||F.isValid)&&o!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:o}:{},errors:t.errors}),n.shouldFocus&&!h&&ge(i,he,s?y:u.mount),h},xe=s=>{const n={...c.mount?a:l};return B(s)?n:ie(s)?f(n,s):s.map(o=>f(n,o))},et=(s,n)=>({invalid:!!f((n||t).errors,s),isDirty:!!f((n||t).dirtyFields,s),error:f((n||t).errors,s),isValidating:!!f(t.validatingFields,s),isTouched:!!f((n||t).touchedFields,s)}),Nt=s=>{s&&J(s).forEach(n=>$(t.errors,n)),g.state.next({errors:s?t.errors:{}})},tt=(s,n,o)=>{const h=(f(i,s,{_f:{}})._f||{}).ref,y=f(t.errors,s)||{},{ref:d,message:b,type:R,...U}=y;I(t.errors,s,{...U,...n,ref:h}),g.state.next({name:s,errors:t.errors,isValid:!1}),o&&o.shouldFocus&&h&&h.focus&&h.focus()},Lt=(s,n)=>re(s)?g.state.subscribe({next:o=>s(L(void 0,n),o)}):L(s,n,!0),rt=s=>g.state.subscribe({next:n=>{lr(s.name,n.name,s.exact)&&nr(n,s.formState||E,Ut,s.reRenderRoot)&&s.callback({values:{...a},...t,...n})}}).unsubscribe,Ot=s=>(c.mount=!0,F={...F,...s.formState},rt({...s,formState:F})),Ne=(s,n={})=>{for(const o of s?J(s):u.mount)u.mount.delete(o),u.array.delete(o),n.keepValue||($(i,o),$(a,o)),!n.keepError&&$(t.errors,o),!n.keepDirty&&$(t.dirtyFields,o),!n.keepTouched&&$(t.touchedFields,o),!n.keepIsValidating&&$(t.validatingFields,o),!r.shouldUnregister&&!n.keepDefaultValue&&$(l,o);g.state.next({values:j(a)}),g.state.next({...t,...n.keepDirty?{isDirty:X()}:{}}),!n.keepIsValid&&p()},st=({disabled:s,name:n})=>{(Z(s)&&c.mount||s||u.disabled.has(n))&&(s?u.disabled.add(n):u.disabled.delete(n))},Le=(s,n={})=>{let o=f(i,s);const h=Z(n.disabled)||Z(r.disabled);return I(i,s,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:s}},name:s,mount:!0,...n}}),u.mount.add(s),o?st({disabled:Z(n.disabled)?n.disabled:r.disabled,name:s}):D(s,!0,n.value),{...h?{disabled:n.disabled||r.disabled}:{},...r.progressive?{required:!!n.required,min:_e(n.min),max:_e(n.max),minLength:_e(n.minLength),maxLength:_e(n.maxLength),pattern:_e(n.pattern)}:{},name:s,onChange:se,onBlur:se,ref:y=>{if(y){Le(s,n),o=f(i,s);const d=B(y.value)&&y.querySelectorAll&&y.querySelectorAll("input,select,textarea")[0]||y,b=er(d),R=o._f.refs||[];if(b?R.find(U=>U===d):d===o._f.ref)return;I(i,s,{_f:{...o._f,...b?{refs:[...R.filter(Ue),d,...Array.isArray(f(l,s))?[{}]:[]],ref:{type:d.type,name:s}}:{ref:d}}}),D(s,!1,void 0,d)}else o=f(i,s,{}),o._f&&(o._f.mount=!1),(r.shouldUnregister||n.shouldUnregister)&&!(Ft(u.array,s)&&c.action)&&u.unMount.add(s)}}},Oe=()=>r.shouldFocusError&&ge(i,he,u.mount),Rt=s=>{Z(s)&&(g.state.next({disabled:s}),ge(i,(n,o)=>{const h=f(i,o);h&&(n.disabled=h._f.disabled||s,Array.isArray(h._f.refs)&&h._f.refs.forEach(y=>{y.disabled=h._f.disabled||s}))},0,!1))},it=(s,n)=>async o=>{let h;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let y=j(a);if(g.state.next({isSubmitting:!0}),r.resolver){const{errors:d,values:b}=await m();t.errors=d,y=j(b)}else await N(i);if(u.disabled.size)for(const d of u.disabled)$(y,d);if($(t.errors,"root"),K(t.errors)){g.state.next({errors:{}});try{await s(y,o)}catch(d){h=d}}else n&&await n({...t.errors},o),Oe(),setTimeout(Oe);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:K(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},Tt=(s,n={})=>{f(i,s)&&(B(n.defaultValue)?G(s,j(f(l,s))):(G(s,n.defaultValue),I(l,s,j(n.defaultValue))),n.keepTouched||$(t.touchedFields,s),n.keepDirty||($(t.dirtyFields,s),t.isDirty=n.defaultValue?X(s,j(f(l,s))):X()),n.keepError||($(t.errors,s),E.isValid&&p()),g.state.next({...t}))},at=(s,n={})=>{const o=s?j(s):l,h=j(o),y=K(s),d=y?l:h;if(n.keepDefaultValues||(l=o),!n.keepValues){if(n.keepDirtyValues){const b=new Set([...u.mount,...Object.keys(me(l,a))]);for(const R of Array.from(b))f(t.dirtyFields,R)?I(d,R,f(a,R)):G(R,f(d,R))}else{if(Ge&&B(s))for(const b of u.mount){const R=f(i,b);if(R&&R._f){const U=Array.isArray(R._f.refs)?R._f.refs[0]:R._f.ref;if(pe(U)){const ee=U.closest("form");if(ee){ee.reset();break}}}}if(n.keepFieldsRef)for(const b of u.mount)G(b,f(d,b));else i={}}a=r.shouldUnregister?n.keepDefaultValues?j(l):{}:j(d),g.array.next({values:{...d}}),g.state.next({values:{...d}})}u={mount:n.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!E.isValid||!!n.keepIsValid||!!n.keepDirtyValues,c.watch=!!r.shouldUnregister,g.state.next({submitCount:n.keepSubmitCount?t.submitCount:0,isDirty:y?!1:n.keepDirty?t.isDirty:!!(n.keepDefaultValues&&!oe(s,l)),isSubmitted:n.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:y?{}:n.keepDirtyValues?n.keepDefaultValues&&a?me(l,a):t.dirtyFields:n.keepDefaultValues&&s?me(l,s):n.keepDirty?t.dirtyFields:{},touchedFields:n.keepTouched?t.touchedFields:{},errors:n.keepErrors?t.errors:{},isSubmitSuccessful:n.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},nt=(s,n)=>at(re(s)?s(a):s,n),It=(s,n={})=>{const o=f(i,s),h=o&&o._f;if(h){const y=h.refs?h.refs[0]:h.ref;y.focus&&(y.focus(),n.shouldSelect&&re(y.select)&&y.select())}},Ut=s=>{t={...t,...s}},lt={control:{register:Le,unregister:Ne,getFieldState:et,handleSubmit:it,setError:tt,_subscribe:rt,_runSchema:m,_focusError:Oe,_getWatch:L,_getDirty:X,_setValid:p,_setFieldArray:Y,_setDisabledField:st,_setErrors:q,_getFieldArray:T,_reset:at,_resetDefaultValues:()=>re(r.defaultValues)&&r.defaultValues().then(s=>{nt(s,r.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:Q,_disableForm:Rt,_subjects:g,_proxyFormState:E,get _fields(){return i},get _formValues(){return a},get _state(){return c},set _state(s){c=s},get _defaultValues(){return l},get _names(){return u},set _names(s){u=s},get _formState(){return t},get _options(){return r},set _options(s){r={...r,...s}}},subscribe:Ot,trigger:ce,register:Le,handleSubmit:it,watch:Lt,setValue:G,getValues:xe,reset:nt,resetField:Tt,clearErrors:Nt,unregister:Ne,setError:tt,setFocus:It,getFieldState:et};return{...lt,formControl:lt}}var le=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=(Math.random()*16+e)%16|0;return(r=="x"?t:t&3|8).toString(16)})},Me=(e,r,t={})=>t.shouldFocus||B(t.shouldFocus)?t.focusName||`${e}.${B(t.focusIndex)?r:t.focusIndex}.`:"",je=(e,r)=>[...e,...J(r)],Be=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Pe(e,r,t){return[...e.slice(0,r),...J(t),...e.slice(r)]}var $e=(e,r,t)=>Array.isArray(e)?(B(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[],We=(e,r)=>[...J(r),...J(e)];function fr(e,r){let t=0;const i=[...e];for(const l of r)i.splice(l-t,1),t++;return Ee(i).length?i:[]}var qe=(e,r)=>B(r)?[]:fr(e,J(r).sort((t,i)=>t-i)),He=(e,r,t)=>{[e[r],e[t]]=[e[t],e[r]]},bt=(e,r,t)=>(e[r]=t,e);function Fr(e){const r=De(),{control:t=r.control,name:i,keyName:l="id",shouldUnregister:a,rules:c}=e,[u,v]=x.useState(t._getFieldArray(i)),S=x.useRef(t._getFieldArray(i).map(le)),E=x.useRef(u),F=x.useRef(i),g=x.useRef(!1);F.current=i,E.current=u,t._names.array.add(i),c&&t.register(i,c),Ce(()=>t._subjects.array.subscribe({next:({values:_,name:m})=>{if(m===F.current||!m){const k=f(_,F.current);Array.isArray(k)&&(v(k),S.current=k.map(le))}}}).unsubscribe,[t]);const A=x.useCallback(_=>{g.current=!0,t._setFieldArray(i,_)},[t,i]),O=(_,m)=>{const k=J(j(_)),N=je(t._getFieldArray(i),k);t._names.focus=Me(i,N.length-1,m),S.current=je(S.current,k.map(le)),A(N),v(N),t._setFieldArray(i,N,je,{argA:Be(_)})},p=(_,m)=>{const k=J(j(_)),N=We(t._getFieldArray(i),k);t._names.focus=Me(i,0,m),S.current=We(S.current,k.map(le)),A(N),v(N),t._setFieldArray(i,N,We,{argA:Be(_)})},w=_=>{const m=qe(t._getFieldArray(i),_);S.current=qe(S.current,_),A(m),v(m),!Array.isArray(f(t._fields,i))&&I(t._fields,i,void 0),t._setFieldArray(i,m,qe,{argA:_})},Y=(_,m,k)=>{const N=J(j(m)),Q=Pe(t._getFieldArray(i),_,N);t._names.focus=Me(i,_,k),S.current=Pe(S.current,_,N.map(le)),A(Q),v(Q),t._setFieldArray(i,Q,Pe,{argA:_,argB:Be(m)})},V=(_,m)=>{const k=t._getFieldArray(i);He(k,_,m),He(S.current,_,m),A(k),v(k),t._setFieldArray(i,k,He,{argA:_,argB:m},!1)},q=(_,m)=>{const k=t._getFieldArray(i);$e(k,_,m),$e(S.current,_,m),A(k),v(k),t._setFieldArray(i,k,$e,{argA:_,argB:m},!1)},D=(_,m)=>{const k=j(m),N=bt(t._getFieldArray(i),_,k);S.current=[...N].map((Q,X)=>!Q||X===_?le():S.current[X]),A(N),v([...N]),t._setFieldArray(i,N,bt,{argA:_,argB:k},!0,!1)},C=_=>{const m=J(j(_));S.current=m.map(le),A([...m]),v([...m]),t._setFieldArray(i,[...m],k=>k,{},!0,!1)};return x.useEffect(()=>{if(t._state.action=!1,ze(i,t._names)&&t._subjects.state.next({...t._formState}),g.current&&(!ye(t._options.mode).isOnSubmit||t._formState.isSubmitted)&&!ye(t._options.reValidateMode).isOnSubmit)if(t._options.resolver)t._runSchema([i]).then(_=>{const m=f(_.errors,i),k=f(t._formState.errors,i);(k?!m&&k.type||m&&(k.type!==m.type||k.message!==m.message):m&&m.type)&&(m?I(t._formState.errors,i,m):$(t._formState.errors,i),t._subjects.state.next({errors:t._formState.errors}))});else{const _=f(t._fields,i);_&&_._f&&!(ye(t._options.reValidateMode).isOnSubmit&&ye(t._options.mode).isOnSubmit)&&Ye(_,t._names.disabled,t._formValues,t._options.criteriaMode===te.all,t._options.shouldUseNativeValidation,!0).then(m=>!K(m)&&t._subjects.state.next({errors:Ct(t._formState.errors,m,i)}))}t._subjects.state.next({name:i,values:j(t._formValues)}),t._names.focus&&ge(t._fields,(_,m)=>{if(t._names.focus&&m.startsWith(t._names.focus)&&_.focus)return _.focus(),1}),t._names.focus="",t._setValid(),g.current=!1},[u,i,t]),x.useEffect(()=>(!f(t._formValues,i)&&t._setFieldArray(i),()=>{const _=(m,k)=>{const N=f(t._fields,m);N&&N._f&&(N._f.mount=k)};t._options.shouldUnregister||a?t.unregister(i):_(i,!1)}),[i,t,l,a]),{swap:x.useCallback(V,[A,i,t]),move:x.useCallback(q,[A,i,t]),prepend:x.useCallback(p,[A,i,t]),append:x.useCallback(O,[A,i,t]),remove:x.useCallback(w,[A,i,t]),insert:x.useCallback(Y,[A,i,t]),update:x.useCallback(D,[A,i,t]),replace:x.useCallback(C,[A,i,t]),fields:x.useMemo(()=>u.map((_,m)=>({..._,[l]:S.current[m]||le()})),[u,l])}}function yr(e={}){const r=x.useRef(void 0),t=x.useRef(void 0),[i,l]=x.useState({isDirty:!1,isValidating:!1,isLoading:re(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:re(e.defaultValues)?void 0:e.defaultValues});if(!r.current)if(e.formControl)r.current={...e.formControl,formState:i},e.defaultValues&&!re(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:c,...u}=dr(e);r.current={...u,formState:i}}const a=r.current.control;return a._options=e,Ce(()=>{const c=a._subscribe({formState:a._proxyFormState,callback:()=>l({...a._formState}),reRenderRoot:!0});return l(u=>({...u,isReady:!0})),a._formState.isReady=!0,c},[a]),x.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),x.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),x.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),x.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),x.useEffect(()=>{if(a._proxyFormState.isDirty){const c=a._getDirty();c!==i.isDirty&&a._subjects.state.next({isDirty:c})}},[a,i.isDirty]),x.useEffect(()=>{e.values&&!oe(e.values,t.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),t.current=e.values,l(c=>({...c}))):a._resetDefaultValues()},[a,e.values]),x.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),r.current.formState=Vt(i,a),r.current}function gr({className:e,type:r,...t}){return M.jsx("input",{type:r,"data-slot":"input",className:Pt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...t})}const hr=({src:e,alt:r="",width:t,height:i,fallback:l=$t,...a})=>{const[c,u]=Ve.useState(e);return Ve.useEffect(()=>{u(e)},[e]),M.jsx("img",{src:c||l,alt:r,width:t,height:i,onError:()=>u(""),...a})},Vr=e=>{const{t:r}=Wt(),{onUpdate:t,needId:i,checkOnly:l,formName:a="skill"}=e,{register:c,watch:u,setValue:v}=yr();x.useEffect(()=>{const F=u((g,{name:A,type:O})=>E(g));return()=>F.unsubscribe()},[u]);const{db:S}=qt();if(!S)return null;const E=F=>{var Y,V,q;const g=F[`${a}q`],A=F[`${a}condition`]&&((Y=F[`${a}condition`])==null?void 0:Y.map(D=>D.replace(a,""))),O=F[`${a}rare`]&&((V=F[`${a}rare`])==null?void 0:V.map(D=>D.replace(a,""))),p=F[`${a}type`]&&((q=F[`${a}type`])==null?void 0:q.map(D=>D.replace(a,"")));if(l&&!g&&!(p!=null&&p.length)&&!(O!=null&&O.length)&&!(A!=null&&A.length)){t([]);return}let w=S.chain.get("skills").orderBy("db_id").value();if(g&&(w=w.filter(D=>D.name.indexOf(g)>-1)),p&&p.length&&(w=w.filter(D=>{let C=0;return p.forEach(_=>{let m=D.icon_id+"";m&&m[0]===_[0]&&m[3]===_[3]&&(C=1)}),C})),O&&O.length&&(w=w.filter(D=>{let C=0;return O.forEach(_=>{D.rare===_&&(C=1)}),C})),A&&A.length){const D=A.join("|"),C=RegExp(D);w=w.filter(_=>{var m;return(m=_.condition)==null?void 0:m.match(C)})}i&&(w=w.reduce((D,C)=>(D.push(C==null?void 0:C.id),D),[])),t(w)};return M.jsxs("div",{className:"flex flex-wrap gap-4",children:[M.jsx("div",{className:"w-full",children:M.jsx(gr,{...c(`${a}q`),placeholder:r("输入关键词")})}),M.jsxs("div",{className:"w-full",children:[M.jsx(de,{className:"text-sm font-medium leading-none",children:r("触发条件")}),M.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Ht.map(({label:F,value:g})=>M.jsxs("div",{className:"flex items-center space-x-2",children:[M.jsx(Ie,{id:a+"condition"+g,value:a+g,onCheckedChange:A=>{const O=u(`${a}condition`)||[];A?v(`${a}condition`,[...O,a+g]):v(`${a}condition`,O.filter(p=>p!==a+g))}}),M.jsx(de,{htmlFor:a+"condition"+g,className:"text-sm font-normal",children:r(F)})]},a+"condition"+g))})]}),M.jsxs("div",{className:"w-full",children:[M.jsx(de,{className:"text-sm font-medium leading-none",children:r("类型")}),M.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Kt.map(({label:F,value:g,icon:A})=>M.jsxs("div",{className:"flex items-center space-x-2",children:[M.jsx(Ie,{id:a+"type"+g,value:a+g,onCheckedChange:O=>{const p=u(`${a}type`)||[];O?v(`${a}type`,[...p,a+g]):v(`${a}type`,p.filter(w=>w!==a+g))}}),M.jsxs("div",{className:"flex items-center space-x-2",children:[A&&M.jsx(hr,{src:"img/skill_icons/"+g+".png",alt:F,width:20,height:20}),M.jsx(de,{htmlFor:a+"type"+g,className:"text-sm font-normal",children:r(F)})]})]},a+"type"+g))})]}),M.jsxs("div",{className:"w-full",children:[M.jsx(de,{className:"text-sm font-medium leading-none",children:r("稀有度")}),M.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:zt.map(({label:F,value:g})=>M.jsxs("div",{className:"flex items-center space-x-2",children:[M.jsx(Ie,{id:a+"rare"+g,value:a+g,onCheckedChange:A=>{const O=u(`${a}rare`)||[];A?v(`${a}rare`,[...O,a+g]):v(`${a}rare`,O.filter(p=>p!==a+g))}}),M.jsx(de,{htmlFor:a+"rare"+g,className:"text-sm font-normal",children:r(F)})]},a+"rare"+g))})]})]})},Ar=()=>{const[e,r]=x.useState(window.innerWidth),[t,i]=x.useState(window.innerHeight);return x.useEffect(()=>{const l=()=>{i(window.innerHeight),r(window.innerWidth)};return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),{height:t,width:e}};export{vr as C,xr as F,gr as I,Vr as S,yr as a,Fr as b,hr as c,Zt as d,De as e,Jt as f,f as g,I as s,Ar as u};
