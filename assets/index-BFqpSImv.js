import{n as Oe,r as l,J as Xe,p as It,q as Fe,j as e,K as Tt,s as Nt,L as Be,aa as Et,w as O,M as _t,P as R,x as N,ab as K,N as Pt,ac as Ze,z as Rt,ad as kt,ae as Mt,O as At,U as Dt,Q as Lt,T as Ot,V as Bt,W as Vt,Y as Ht,Z as Ft,E as ne,af as Ut,u as Ve,B as ae,a as $t,g as zt,C as Ue,S as Ee,G as _e,t as oe,f as Re}from"./index-3yd_dm4Y.js";import{H as Wt}from"./Helmet-CxUaRvRG.js";import{a as Kt,b as Gt}from"./useViewport-DFWW1tkK.js";import{a as qt,F as Yt,b as ie,c as ce,e as de,f as ue,h as Xt,d as Pe,P as Zt,S as Jt,o as ve,i as Qt,n as $e,t as eo,s as pe,l as to,C as oo}from"./index-DO-eWEA-.js";import{e as ze}from"./PlayerList-B-CNbj7P.js";import{C as Je}from"./chevron-down-eTen1E2Y.js";import{a as no}from"./SupportListWithFilter-OMGYHSZC.js";import"./label-sJOf3gfQ.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ro=Oe("chevron-up",so);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ao=Oe("frown",lo);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],co=Oe("smile",io);var uo=[" ","Enter","ArrowUp","ArrowDown"],po=[" ","Enter"],Q="Select",[Se,we,fo]=Et(Q),[se,an]=Nt(Q,[fo,Xe]),ye=Xe(),[mo,G]=se(Q),[ho,xo]=se(Q),Qe=o=>{const{__scopeSelect:n,children:t,open:i,defaultOpen:a,onOpenChange:u,value:d,defaultValue:r,onValueChange:s,dir:c,name:x,autoComplete:v,disabled:j,required:I,form:T}=o,p=ye(n),[g,y]=l.useState(null),[f,h]=l.useState(null),[k,M]=l.useState(!1),re=It(c),[E,D]=Fe({prop:i,defaultProp:a??!1,onChange:u,caller:Q}),[$,Y]=Fe({prop:d,defaultProp:r,onChange:s,caller:Q}),B=l.useRef(null),V=g?T||!!g.closest("form"):!0,[z,H]=l.useState(new Set),F=Array.from(z).map(_=>_.props.value).join(";");return e.jsx(Tt,{...p,children:e.jsxs(mo,{required:I,scope:n,trigger:g,onTriggerChange:y,valueNode:f,onValueNodeChange:h,valueNodeHasChildren:k,onValueNodeHasChildrenChange:M,contentId:Be(),value:$,onValueChange:Y,open:E,onOpenChange:D,dir:re,triggerPointerDownPosRef:B,disabled:j,children:[e.jsx(Se.Provider,{scope:n,children:e.jsx(ho,{scope:o.__scopeSelect,onNativeOptionAdd:l.useCallback(_=>{H(L=>new Set(L).add(_))},[]),onNativeOptionRemove:l.useCallback(_=>{H(L=>{const U=new Set(L);return U.delete(_),U})},[]),children:t})}),V?e.jsxs(yt,{"aria-hidden":!0,required:I,tabIndex:-1,name:x,autoComplete:v,value:$,onChange:_=>Y(_.target.value),disabled:j,form:T,children:[$===void 0?e.jsx("option",{value:""}):null,Array.from(z)]},F):null]})})};Qe.displayName=Q;var et="SelectTrigger",tt=l.forwardRef((o,n)=>{const{__scopeSelect:t,disabled:i=!1,...a}=o,u=ye(t),d=G(et,t),r=d.disabled||i,s=O(n,d.onTriggerChange),c=we(t),x=l.useRef("touch"),[v,j,I]=Ct(p=>{const g=c().filter(h=>!h.disabled),y=g.find(h=>h.value===d.value),f=jt(g,p,y);f!==void 0&&d.onValueChange(f.value)}),T=p=>{r||(d.onOpenChange(!0),I()),p&&(d.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(_t,{asChild:!0,...u,children:e.jsx(R.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:r,"data-disabled":r?"":void 0,"data-placeholder":bt(d.value)?"":void 0,...a,ref:s,onClick:N(a.onClick,p=>{p.currentTarget.focus(),x.current!=="mouse"&&T(p)}),onPointerDown:N(a.onPointerDown,p=>{x.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(T(p),p.preventDefault())}),onKeyDown:N(a.onKeyDown,p=>{const g=v.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&j(p.key),!(g&&p.key===" ")&&uo.includes(p.key)&&(T(),p.preventDefault())})})})});tt.displayName=et;var ot="SelectValue",nt=l.forwardRef((o,n)=>{const{__scopeSelect:t,className:i,style:a,children:u,placeholder:d="",...r}=o,s=G(ot,t),{onValueNodeHasChildrenChange:c}=s,x=u!==void 0,v=O(n,s.onValueNodeChange);return K(()=>{c(x)},[c,x]),e.jsx(R.span,{...r,ref:v,style:{pointerEvents:"none"},children:bt(s.value)?e.jsx(e.Fragment,{children:d}):u})});nt.displayName=ot;var vo="SelectIcon",st=l.forwardRef((o,n)=>{const{__scopeSelect:t,children:i,...a}=o;return e.jsx(R.span,{"aria-hidden":!0,...a,ref:n,children:i||"▼"})});st.displayName=vo;var go="SelectPortal",rt=o=>e.jsx(Pt,{asChild:!0,...o});rt.displayName=go;var ee="SelectContent",lt=l.forwardRef((o,n)=>{const t=G(ee,o.__scopeSelect),[i,a]=l.useState();if(K(()=>{a(new DocumentFragment)},[]),!t.open){const u=i;return u?Ze.createPortal(e.jsx(at,{scope:o.__scopeSelect,children:e.jsx(Se.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),u):null}return e.jsx(it,{...o,ref:n})});lt.displayName=ee;var A=10,[at,q]=se(ee),So="SelectContentImpl",wo=Ot("SelectContent.RemoveScroll"),it=l.forwardRef((o,n)=>{const{__scopeSelect:t,position:i="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:u,onPointerDownOutside:d,side:r,sideOffset:s,align:c,alignOffset:x,arrowPadding:v,collisionBoundary:j,collisionPadding:I,sticky:T,hideWhenDetached:p,avoidCollisions:g,...y}=o,f=G(ee,t),[h,k]=l.useState(null),[M,re]=l.useState(null),E=O(n,m=>k(m)),[D,$]=l.useState(null),[Y,B]=l.useState(null),V=we(t),[z,H]=l.useState(!1),F=l.useRef(!1);l.useEffect(()=>{if(h)return At(h)},[h]),Dt();const _=l.useCallback(m=>{const[C,...P]=V().map(w=>w.ref.current),[b]=P.slice(-1),S=document.activeElement;for(const w of m)if(w===S||(w==null||w.scrollIntoView({block:"nearest"}),w===C&&M&&(M.scrollTop=0),w===b&&M&&(M.scrollTop=M.scrollHeight),w==null||w.focus(),document.activeElement!==S))return},[V,M]),L=l.useCallback(()=>_([D,h]),[_,D,h]);l.useEffect(()=>{z&&L()},[z,L]);const{onOpenChange:U,triggerPointerDownPosRef:W}=f;l.useEffect(()=>{if(h){let m={x:0,y:0};const C=b=>{var S,w;m={x:Math.abs(Math.round(b.pageX)-(((S=W.current)==null?void 0:S.x)??0)),y:Math.abs(Math.round(b.pageY)-(((w=W.current)==null?void 0:w.y)??0))}},P=b=>{m.x<=10&&m.y<=10?b.preventDefault():h.contains(b.target)||U(!1),document.removeEventListener("pointermove",C),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",C),document.addEventListener("pointerup",P,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",C),document.removeEventListener("pointerup",P,{capture:!0})}}},[h,U,W]),l.useEffect(()=>{const m=()=>U(!1);return window.addEventListener("blur",m),window.addEventListener("resize",m),()=>{window.removeEventListener("blur",m),window.removeEventListener("resize",m)}},[U]);const[be,he]=Ct(m=>{const C=V().filter(S=>!S.disabled),P=C.find(S=>S.ref.current===document.activeElement),b=jt(C,m,P);b&&setTimeout(()=>b.ref.current.focus())}),Ce=l.useCallback((m,C,P)=>{const b=!F.current&&!P;(f.value!==void 0&&f.value===C||b)&&($(m),b&&(F.current=!0))},[f.value]),je=l.useCallback(()=>h==null?void 0:h.focus(),[h]),te=l.useCallback((m,C,P)=>{const b=!F.current&&!P;(f.value!==void 0&&f.value===C||b)&&B(m)},[f.value]),xe=i==="popper"?ke:ct,le=xe===ke?{side:r,sideOffset:s,align:c,alignOffset:x,arrowPadding:v,collisionBoundary:j,collisionPadding:I,sticky:T,hideWhenDetached:p,avoidCollisions:g}:{};return e.jsx(at,{scope:t,content:h,viewport:M,onViewportChange:re,itemRefCallback:Ce,selectedItem:D,onItemLeave:je,itemTextRefCallback:te,focusSelectedItem:L,selectedItemText:Y,position:i,isPositioned:z,searchRef:be,children:e.jsx(Lt,{as:wo,allowPinchZoom:!0,children:e.jsx(Bt,{asChild:!0,trapped:f.open,onMountAutoFocus:m=>{m.preventDefault()},onUnmountAutoFocus:N(a,m=>{var C;(C=f.trigger)==null||C.focus({preventScroll:!0}),m.preventDefault()}),children:e.jsx(Vt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:m=>m.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:e.jsx(xe,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:m=>m.preventDefault(),...y,...le,onPlaced:()=>H(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:N(y.onKeyDown,m=>{const C=m.ctrlKey||m.altKey||m.metaKey;if(m.key==="Tab"&&m.preventDefault(),!C&&m.key.length===1&&he(m.key),["ArrowUp","ArrowDown","Home","End"].includes(m.key)){let b=V().filter(S=>!S.disabled).map(S=>S.ref.current);if(["ArrowUp","End"].includes(m.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(m.key)){const S=m.target,w=b.indexOf(S);b=b.slice(w+1)}setTimeout(()=>_(b)),m.preventDefault()}})})})})})})});it.displayName=So;var yo="SelectItemAlignedPosition",ct=l.forwardRef((o,n)=>{const{__scopeSelect:t,onPlaced:i,...a}=o,u=G(ee,t),d=q(ee,t),[r,s]=l.useState(null),[c,x]=l.useState(null),v=O(n,E=>x(E)),j=we(t),I=l.useRef(!1),T=l.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:y,focusSelectedItem:f}=d,h=l.useCallback(()=>{if(u.trigger&&u.valueNode&&r&&c&&p&&g&&y){const E=u.trigger.getBoundingClientRect(),D=c.getBoundingClientRect(),$=u.valueNode.getBoundingClientRect(),Y=y.getBoundingClientRect();if(u.dir!=="rtl"){const S=Y.left-D.left,w=$.left-S,Z=E.left-w,J=E.width+Z,Ie=Math.max(J,D.width),Te=window.innerWidth-A,Ne=ze(w,[A,Math.max(A,Te-Ie)]);r.style.minWidth=J+"px",r.style.left=Ne+"px"}else{const S=D.right-Y.right,w=window.innerWidth-$.right-S,Z=window.innerWidth-E.right-w,J=E.width+Z,Ie=Math.max(J,D.width),Te=window.innerWidth-A,Ne=ze(w,[A,Math.max(A,Te-Ie)]);r.style.minWidth=J+"px",r.style.right=Ne+"px"}const B=j(),V=window.innerHeight-A*2,z=p.scrollHeight,H=window.getComputedStyle(c),F=parseInt(H.borderTopWidth,10),_=parseInt(H.paddingTop,10),L=parseInt(H.borderBottomWidth,10),U=parseInt(H.paddingBottom,10),W=F+_+z+U+L,be=Math.min(g.offsetHeight*5,W),he=window.getComputedStyle(p),Ce=parseInt(he.paddingTop,10),je=parseInt(he.paddingBottom,10),te=E.top+E.height/2-A,xe=V-te,le=g.offsetHeight/2,m=g.offsetTop+le,C=F+_+m,P=W-C;if(C<=te){const S=B.length>0&&g===B[B.length-1].ref.current;r.style.bottom="0px";const w=c.clientHeight-p.offsetTop-p.offsetHeight,Z=Math.max(xe,le+(S?je:0)+w+L),J=C+Z;r.style.height=J+"px"}else{const S=B.length>0&&g===B[0].ref.current;r.style.top="0px";const Z=Math.max(te,F+p.offsetTop+(S?Ce:0)+le)+P;r.style.height=Z+"px",p.scrollTop=C-te+p.offsetTop}r.style.margin=`${A}px 0`,r.style.minHeight=be+"px",r.style.maxHeight=V+"px",i==null||i(),requestAnimationFrame(()=>I.current=!0)}},[j,u.trigger,u.valueNode,r,c,p,g,y,u.dir,i]);K(()=>h(),[h]);const[k,M]=l.useState();K(()=>{c&&M(window.getComputedStyle(c).zIndex)},[c]);const re=l.useCallback(E=>{E&&T.current===!0&&(h(),f==null||f(),T.current=!1)},[h,f]);return e.jsx(Co,{scope:t,contentWrapper:r,shouldExpandOnScrollRef:I,onScrollButtonChange:re,children:e.jsx("div",{ref:s,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:e.jsx(R.div,{...a,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});ct.displayName=yo;var bo="SelectPopperPosition",ke=l.forwardRef((o,n)=>{const{__scopeSelect:t,align:i="start",collisionPadding:a=A,...u}=o,d=ye(t);return e.jsx(Ht,{...d,...u,ref:n,align:i,collisionPadding:a,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ke.displayName=bo;var[Co,He]=se(ee,{}),Me="SelectViewport",dt=l.forwardRef((o,n)=>{const{__scopeSelect:t,nonce:i,...a}=o,u=q(Me,t),d=He(Me,t),r=O(n,u.onViewportChange),s=l.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(Se.Slot,{scope:t,children:e.jsx(R.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:r,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:N(a.onScroll,c=>{const x=c.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:j}=d;if(j!=null&&j.current&&v){const I=Math.abs(s.current-x.scrollTop);if(I>0){const T=window.innerHeight-A*2,p=parseFloat(v.style.minHeight),g=parseFloat(v.style.height),y=Math.max(p,g);if(y<T){const f=y+I,h=Math.min(T,f),k=f-h;v.style.height=h+"px",v.style.bottom==="0px"&&(x.scrollTop=k>0?k:0,v.style.justifyContent="flex-end")}}}s.current=x.scrollTop})})})]})});dt.displayName=Me;var ut="SelectGroup",[jo,Io]=se(ut),To=l.forwardRef((o,n)=>{const{__scopeSelect:t,...i}=o,a=Be();return e.jsx(jo,{scope:t,id:a,children:e.jsx(R.div,{role:"group","aria-labelledby":a,...i,ref:n})})});To.displayName=ut;var pt="SelectLabel",No=l.forwardRef((o,n)=>{const{__scopeSelect:t,...i}=o,a=Io(pt,t);return e.jsx(R.div,{id:a.id,...i,ref:n})});No.displayName=pt;var ge="SelectItem",[Eo,ft]=se(ge),mt=l.forwardRef((o,n)=>{const{__scopeSelect:t,value:i,disabled:a=!1,textValue:u,...d}=o,r=G(ge,t),s=q(ge,t),c=r.value===i,[x,v]=l.useState(u??""),[j,I]=l.useState(!1),T=O(n,f=>{var h;return(h=s.itemRefCallback)==null?void 0:h.call(s,f,i,a)}),p=Be(),g=l.useRef("touch"),y=()=>{a||(r.onValueChange(i),r.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Eo,{scope:t,value:i,disabled:a,textId:p,isSelected:c,onItemTextChange:l.useCallback(f=>{v(h=>h||((f==null?void 0:f.textContent)??"").trim())},[]),children:e.jsx(Se.ItemSlot,{scope:t,value:i,disabled:a,textValue:x,children:e.jsx(R.div,{role:"option","aria-labelledby":p,"data-highlighted":j?"":void 0,"aria-selected":c&&j,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...d,ref:T,onFocus:N(d.onFocus,()=>I(!0)),onBlur:N(d.onBlur,()=>I(!1)),onClick:N(d.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:N(d.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:N(d.onPointerDown,f=>{g.current=f.pointerType}),onPointerMove:N(d.onPointerMove,f=>{var h;g.current=f.pointerType,a?(h=s.onItemLeave)==null||h.call(s):g.current==="mouse"&&f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:N(d.onPointerLeave,f=>{var h;f.currentTarget===document.activeElement&&((h=s.onItemLeave)==null||h.call(s))}),onKeyDown:N(d.onKeyDown,f=>{var k;((k=s.searchRef)==null?void 0:k.current)!==""&&f.key===" "||(po.includes(f.key)&&y(),f.key===" "&&f.preventDefault())})})})})});mt.displayName=ge;var me="SelectItemText",ht=l.forwardRef((o,n)=>{const{__scopeSelect:t,className:i,style:a,...u}=o,d=G(me,t),r=q(me,t),s=ft(me,t),c=xo(me,t),[x,v]=l.useState(null),j=O(n,y=>v(y),s.onItemTextChange,y=>{var f;return(f=r.itemTextRefCallback)==null?void 0:f.call(r,y,s.value,s.disabled)}),I=x==null?void 0:x.textContent,T=l.useMemo(()=>e.jsx("option",{value:s.value,disabled:s.disabled,children:I},s.value),[s.disabled,s.value,I]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=c;return K(()=>(p(T),()=>g(T)),[p,g,T]),e.jsxs(e.Fragment,{children:[e.jsx(R.span,{id:s.textId,...u,ref:j}),s.isSelected&&d.valueNode&&!d.valueNodeHasChildren?Ze.createPortal(u.children,d.valueNode):null]})});ht.displayName=me;var xt="SelectItemIndicator",vt=l.forwardRef((o,n)=>{const{__scopeSelect:t,...i}=o;return ft(xt,t).isSelected?e.jsx(R.span,{"aria-hidden":!0,...i,ref:n}):null});vt.displayName=xt;var Ae="SelectScrollUpButton",gt=l.forwardRef((o,n)=>{const t=q(Ae,o.__scopeSelect),i=He(Ae,o.__scopeSelect),[a,u]=l.useState(!1),d=O(n,i.onScrollButtonChange);return K(()=>{if(t.viewport&&t.isPositioned){let r=function(){const c=s.scrollTop>0;u(c)};const s=t.viewport;return r(),s.addEventListener("scroll",r),()=>s.removeEventListener("scroll",r)}},[t.viewport,t.isPositioned]),a?e.jsx(wt,{...o,ref:d,onAutoScroll:()=>{const{viewport:r,selectedItem:s}=t;r&&s&&(r.scrollTop=r.scrollTop-s.offsetHeight)}}):null});gt.displayName=Ae;var De="SelectScrollDownButton",St=l.forwardRef((o,n)=>{const t=q(De,o.__scopeSelect),i=He(De,o.__scopeSelect),[a,u]=l.useState(!1),d=O(n,i.onScrollButtonChange);return K(()=>{if(t.viewport&&t.isPositioned){let r=function(){const c=s.scrollHeight-s.clientHeight,x=Math.ceil(s.scrollTop)<c;u(x)};const s=t.viewport;return r(),s.addEventListener("scroll",r),()=>s.removeEventListener("scroll",r)}},[t.viewport,t.isPositioned]),a?e.jsx(wt,{...o,ref:d,onAutoScroll:()=>{const{viewport:r,selectedItem:s}=t;r&&s&&(r.scrollTop=r.scrollTop+s.offsetHeight)}}):null});St.displayName=De;var wt=l.forwardRef((o,n)=>{const{__scopeSelect:t,onAutoScroll:i,...a}=o,u=q("SelectScrollButton",t),d=l.useRef(null),r=we(t),s=l.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return l.useEffect(()=>()=>s(),[s]),K(()=>{var x;const c=r().find(v=>v.ref.current===document.activeElement);(x=c==null?void 0:c.ref.current)==null||x.scrollIntoView({block:"nearest"})},[r]),e.jsx(R.div,{"aria-hidden":!0,...a,ref:n,style:{flexShrink:0,...a.style},onPointerDown:N(a.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(i,50))}),onPointerMove:N(a.onPointerMove,()=>{var c;(c=u.onItemLeave)==null||c.call(u),d.current===null&&(d.current=window.setInterval(i,50))}),onPointerLeave:N(a.onPointerLeave,()=>{s()})})}),_o="SelectSeparator",Po=l.forwardRef((o,n)=>{const{__scopeSelect:t,...i}=o;return e.jsx(R.div,{"aria-hidden":!0,...i,ref:n})});Po.displayName=_o;var Le="SelectArrow",Ro=l.forwardRef((o,n)=>{const{__scopeSelect:t,...i}=o,a=ye(t),u=G(Le,t),d=q(Le,t);return u.open&&d.position==="popper"?e.jsx(Ft,{...a,...i,ref:n}):null});Ro.displayName=Le;var ko="SelectBubbleInput",yt=l.forwardRef(({__scopeSelect:o,value:n,...t},i)=>{const a=l.useRef(null),u=O(i,a),d=Rt(n);return l.useEffect(()=>{const r=a.current;if(!r)return;const s=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(s,"value").set;if(d!==n&&x){const v=new Event("change",{bubbles:!0});x.call(r,n),r.dispatchEvent(v)}},[d,n]),e.jsx(R.select,{...t,style:{...kt,...t.style},ref:u,defaultValue:n})});yt.displayName=ko;function bt(o){return o===""||o===void 0}function Ct(o){const n=Mt(o),t=l.useRef(""),i=l.useRef(0),a=l.useCallback(d=>{const r=t.current+d;n(r),function s(c){t.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>s(""),1e3))}(r)},[n]),u=l.useCallback(()=>{t.current="",window.clearTimeout(i.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(i.current),[]),[t,a,u]}function jt(o,n,t){const a=n.length>1&&Array.from(n).every(c=>c===n[0])?n[0]:n,u=t?o.indexOf(t):-1;let d=Mo(o,Math.max(u,0));a.length===1&&(d=d.filter(c=>c!==t));const s=d.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return s!==t?s:void 0}function Mo(o,n){return o.map((t,i)=>o[(n+i)%o.length])}var Ao=Qe,Do=tt,Lo=nt,Oo=st,Bo=rt,Vo=lt,Ho=dt,Fo=mt,Uo=ht,$o=vt,zo=gt,Wo=St;function We({...o}){return e.jsx(Ao,{"data-slot":"select",...o})}function Ke({...o}){return e.jsx(Lo,{"data-slot":"select-value",...o})}function Ge({className:o,size:n="default",children:t,...i}){return e.jsxs(Do,{"data-slot":"select-trigger","data-size":n,className:ne("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",o),...i,children:[t,e.jsx(Oo,{asChild:!0,children:e.jsx(Je,{className:"size-4 opacity-50"})})]})}function qe({className:o,children:n,position:t="popper",...i}){return e.jsx(Bo,{children:e.jsxs(Vo,{"data-slot":"select-content",className:ne("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t,...i,children:[e.jsx(Ko,{}),e.jsx(Ho,{className:ne("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:n}),e.jsx(Go,{})]})})}function Ye({className:o,children:n,...t}){return e.jsxs(Fo,{"data-slot":"select-item",className:ne("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",o),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx($o,{children:e.jsx(Ut,{className:"size-4"})})}),e.jsx(Uo,{children:n})]})}function Ko({className:o,...n}){return e.jsx(zo,{"data-slot":"select-scroll-up-button",className:ne("flex cursor-default items-center justify-center py-1",o),...n,children:e.jsx(ro,{className:"size-4"})})}function Go({className:o,...n}){return e.jsx(Wo,{"data-slot":"select-scroll-down-button",className:ne("flex cursor-default items-center justify-center py-1",o),...n,children:e.jsx(Je,{className:"size-4"})})}const qo=ve({player0:ve({id:pe(),imgUrl:pe().optional()}).optional(),support:ve({id:pe(),imgUrl:pe().optional()}).optional(),supportLevel:$e().min(0).max(4),p1:Qt(ve({attr:eo([pe(),$e()])})).optional()}),Yo=[{value:"speed",label:"速度"},{value:"stamina",label:"耐力"},{value:"power",label:"力量"},{value:"guts",label:"根性"},{value:"wisdom",label:"智力"},{value:"grass",label:"草地"},{value:"dirt",label:"泥地"},{value:"shortDistance",label:"短距离"},{value:"mile",label:"英里"},{value:"mediumDistance",label:"中距离"},{value:"longDistance",label:"长距离"},{value:"escapeR",label:"逃"},{value:"leadingR",label:"先"},{value:"insertR",label:"差"},{value:"trackingR",label:"追"}],Xo=Array.from({length:9},(o,n)=>({value:n+1,label:`${n+1}星`})),Zo=({onSearch:o})=>{const{t:n}=Ve(),t=Kt({resolver:qt(qo),defaultValues:{supportLevel:0,p1:[]}}),{fields:i,append:a,remove:u}=Gt({control:t.control,name:"p1"}),d=async s=>{var x,v,j;let c={attrs:[],levels:[]};(x=s.player0)!=null&&x.id&&(c.attrs.push("playerId0"),c.levels.push(s.player0.id)),(v=s.support)!=null&&v.id&&(c.attrs.push("supportId"),c.levels.push(s.support.id)),(j=s.p1)==null||j.forEach(I=>{c.attrs.push(I.attr[0]),c.levels.push(I.attr[1])}),o(c)},r=()=>t.reset();return e.jsx(Yt,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(d),className:"space-y-4",children:[e.jsx(no,{className:"h-[60vh]",children:e.jsxs("div",{className:"space-y-4 p-2",children:[i.map((s,c)=>e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{control:t.control,name:`p1.${c}.attr.0`,render:({field:x})=>e.jsxs(ce,{className:"flex-1",children:[e.jsxs(We,{onValueChange:x.onChange,value:x.value,children:[e.jsx(de,{children:e.jsx(Ge,{children:e.jsx(Ke,{placeholder:n("选择属性")})})}),e.jsx(qe,{children:Yo.map(v=>e.jsx(Ye,{value:v.value,children:n(v.label)},v.value))})]}),e.jsx(ue,{})]})}),e.jsx(ie,{control:t.control,name:`p1.${c}.attr.1`,render:({field:x})=>e.jsxs(ce,{className:"flex-1",children:[e.jsxs(We,{onValueChange:x.onChange,value:x.value,children:[e.jsx(de,{children:e.jsx(Ge,{children:e.jsx(Ke,{placeholder:n("选择等级")})})}),e.jsx(qe,{children:Xo.map(v=>e.jsx(Ye,{value:v.value,children:n(v.label)},v.value))})]}),e.jsx(ue,{})]})}),e.jsx(ae,{variant:"outline",size:"icon",onClick:()=>u(c),children:e.jsx(X,{className:"h-4 w-4"})})]})},s.id)),e.jsxs(ae,{type:"button",variant:"outline",onClick:()=>a({attr:["",1]}),className:"w-full",children:[e.jsx(Xt,{className:"h-4 w-4 mr-2"}),n("添加过滤条件")]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ie,{control:t.control,name:"player0",render:({field:s})=>e.jsxs(ce,{children:[e.jsx(Pe,{children:n("角色")}),e.jsx(de,{children:e.jsx(Zt,{value:s.value,onChange:c=>s.onChange(c)})}),e.jsx(ue,{})]})}),e.jsx(ie,{control:t.control,name:"support",render:({field:s})=>e.jsxs(ce,{children:[e.jsx(Pe,{children:n("支援卡")}),e.jsx(de,{children:e.jsx(Jt,{value:s.value,onChange:c=>s.onChange(c)})}),e.jsx(ue,{})]})})]}),e.jsx(ie,{control:t.control,name:"supportLevel",render:({field:s})=>e.jsxs(ce,{children:[e.jsx(Pe,{children:n("突破等级")}),e.jsx(de,{children:e.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(c=>e.jsx(ae,{variant:s.value>=c?"default":"outline",type:"button",size:"sm",onClick:()=>s.onChange(c),children:c},c))})}),e.jsx(ue,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ae,{type:"button",variant:"outline",onClick:r,children:n("重置")}),e.jsx(ae,{type:"submit",children:n("搜索")})]})]})})},fe=zt.chain.get("userId").value(),Jo=({data:o})=>{const{t:n}=Ve(),{db:t}=$t();if(!t)return null;const i=t.chain.get("players").find({id:o.playerId0}).value(),a=t.chain.get("supports").find({id:o.supportId}).value(),u=async r=>{if(!fe){oe.info(n("刷新后重试"));return}(await Re.post("https://urarawin-worker.urarawin.workers.dev/api/sqlite/like",{id:r.id,userId:fe})).data&&(oe.info(n("成功")),r.likes+=1)},d=async r=>{if(fe){if(r.dislikes&&r.dislikes.indexOf(fe)!==-1)return}else{oe.info(n("刷新后重试"));return}(await Re.post("https://urarawin-worker.urarawin.workers.dev/api/sqlite/dislike",{id:r.id,userId:fe})).data&&(oe.info(n("成功")),r.dislikes+=1)};return e.jsx("div",{className:"w-1/2 p-1",children:e.jsxs("div",{className:"border-green-300 border border-solid flex flex-col",children:[e.jsx(to.CopyToClipboard,{text:o.gameId,onCopy:()=>message.info("成功"),children:e.jsxs("div",{className:"w-full flex text-lg",children:[o.gameId,e.jsx(oo,{})]})}),e.jsxs("div",{className:"w-full flex items-center justify-around",children:[i&&e.jsx("img",{alt:i.name,src:Ue+i.imgUrl,className:"w-10 h-10"}),a&&e.jsx("img",{alt:a.name,src:Ue+a.imgUrl,className:"w-10"}),e.jsxs("div",{className:"text-lg flex",onClick:()=>u(o),children:[e.jsx(co,{}),e.jsx("div",{children:o.likes})]}),e.jsxs("div",{className:"text-lg flex",onClick:()=>d(o),children:[e.jsx(ao,{}),e.jsx("div",{children:o.dislikes})]})]}),e.jsx("div",{children:`${n(Ee[o.blue0])}: ${o.blueLevel0}`}),e.jsx("div",{children:`${n(_e[o.red0])}: ${o.redLevel0}`}),Object.keys(Ee).map(r=>o[r]?e.jsx("div",{children:`${n("总计")} ${n(Ee[r])}: ${o[r]}`},r):null),Object.keys(_e).map(r=>o[r]?e.jsx("div",{children:`${n("总计")} ${n(_e[r])}: ${o[r]}`},r):null),e.jsx("div",{children:`${n("突破等级")}: ${o.supportLevel||0}`})]})})},cn=()=>{const{t:o}=Ve(),[n,t]=l.useState([]),i=async a=>{try{const u=await Re.post("https://urarawin-worker.urarawin.workers.dev/api/sqlite/search",a);u.data&&(u.data.count?t(u.data.list):oe.info(o("暂无数据")))}catch{oe.error(o("出错了"))}};return e.jsxs("div",{className:"w-full flex flex-wrap px-3",children:[e.jsx(Wt,{children:e.jsx("title",{children:"分享 - 乌拉拉大胜利 - 赛马娘资料站"})}),e.jsx(Zo,{search:i}),e.jsx("div",{className:"w-full text-lg font-semibold",children:o("结果")}),n.map(a=>e.jsx(Jo,{data:a},a.id))]})};export{cn as default};
